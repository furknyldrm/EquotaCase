{"remainingRequest":"/Users/furkanyildirim/Desktop/vuexy-admin-v8.2.1/vue-version/vuexy-bootstrapvue/vuexy-starter-kit 2/node_modules/babel-loader/lib/index.js!/Users/furkanyildirim/Desktop/vuexy-admin-v8.2.1/vue-version/vuexy-bootstrapvue/vuexy-starter-kit 2/src/auth/jwt/useJwt.js","dependencies":[{"path":"/Users/furkanyildirim/Desktop/vuexy-admin-v8.2.1/vue-version/vuexy-bootstrapvue/vuexy-starter-kit 2/src/auth/jwt/useJwt.js","mtime":1661700918620},{"path":"/Users/furkanyildirim/Desktop/vuexy-admin-v8.2.1/vue-version/vuexy-bootstrapvue/vuexy-starter-kit 2/babel.config.js","mtime":1611064082000},{"path":"/Users/furkanyildirim/Desktop/vuexy-admin-v8.2.1/vue-version/vuexy-bootstrapvue/vuexy-starter-kit 2/node_modules/cache-loader/dist/cjs.js","mtime":1661697115440},{"path":"/Users/furkanyildirim/Desktop/vuexy-admin-v8.2.1/vue-version/vuexy-bootstrapvue/vuexy-starter-kit 2/node_modules/babel-loader/lib/index.js","mtime":1661697117710}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBheGlvcyBmcm9tICcuLi8uLi9heGlvcyc7CmltcG9ydCBzdG9yZSBmcm9tICcuLi8uLi9zdG9yZS9pbmRleCc7CmltcG9ydCByb3V0ZXIgZnJvbSAnLi4vLi4vcm91dGVyJzsgLy8gVG9rZW4gUmVmcmVzaAoKdmFyIGlzQWxyZWFkeUZldGNoaW5nQWNjZXNzVG9rZW4gPSBmYWxzZTsKdmFyIHN1YnNjcmliZXJzID0gW107CnZhciBzZXJ2ZXIgPSAnaHR0cHM6Ly9hcGkyLmJpbmFuY2UuY29tJzsKCmZ1bmN0aW9uIG9uQWNjZXNzVG9rZW5GZXRjaGVkKGFjY2Vzc190b2tlbikgewogIHN1YnNjcmliZXJzID0gc3Vic2NyaWJlcnMuZmlsdGVyKGZ1bmN0aW9uIChjYWxsYmFjaykgewogICAgcmV0dXJuIGNhbGxiYWNrKGFjY2Vzc190b2tlbik7CiAgfSk7Cn0KCmZ1bmN0aW9uIGFkZFN1YnNjcmliZXIoY2FsbGJhY2spIHsKICBzdWJzY3JpYmVycy5wdXNoKGNhbGxiYWNrKTsKfQoKZXhwb3J0IGRlZmF1bHQgewogIGluaXQ6IGZ1bmN0aW9uIGluaXQoKSB7CiAgICBheGlvcy5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICByZXR1cm4gcmVzcG9uc2U7CiAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgdmFyIGNvbmZpZyA9IGVycm9yLmNvbmZpZywKICAgICAgICAgIHJlc3BvbnNlID0gZXJyb3IucmVzcG9uc2U7CiAgICAgIHZhciBvcmlnaW5hbFJlcXVlc3QgPSBjb25maWc7CgogICAgICBpZiAocmVzcG9uc2UpIHsKICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHsKICAgICAgICAgIHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgJ25hbWUnOiAnbG9naW4nCiAgICAgICAgICB9KTsKCiAgICAgICAgICBpZiAoIWlzQWxyZWFkeUZldGNoaW5nQWNjZXNzVG9rZW4pIHsKICAgICAgICAgICAgaXNBbHJlYWR5RmV0Y2hpbmdBY2Nlc3NUb2tlbiA9IHRydWU7CiAgICAgICAgICAgIHN0b3JlLmRpc3BhdGNoKCdtb2R1bGVBdXRoL2ZldGNoQWNjZXNzVG9rZW4nKS50aGVuKGZ1bmN0aW9uIChhY2Nlc3NfdG9rZW4pIHsKICAgICAgICAgICAgICBpc0FscmVhZHlGZXRjaGluZ0FjY2Vzc1Rva2VuID0gZmFsc2U7CiAgICAgICAgICAgICAgb25BY2Nlc3NUb2tlbkZldGNoZWQoYWNjZXNzX3Rva2VuKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIHJldHJ5T3JpZ2luYWxSZXF1ZXN0ID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICAgICAgYWRkU3Vic2NyaWJlcihmdW5jdGlvbiAoYWNjZXNzX3Rva2VuKSB7CiAgICAgICAgICAgICAgb3JpZ2luYWxSZXF1ZXN0LmhlYWRlcnMuQXV0aG9yaXphdGlvbiA9ICJKV1QgIi5jb25jYXQoYWNjZXNzX3Rva2VuKTsKICAgICAgICAgICAgICByZXNvbHZlKGF4aW9zKG9yaWdpbmFsUmVxdWVzdCkpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgICAgcmV0dXJuIHJldHJ5T3JpZ2luYWxSZXF1ZXN0OwogICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDApIHsKICAgICAgICAgIHJlc3BvbnNlLmRhdGEgPSB7CiAgICAgICAgICAgIHJlc3VsdFN0YXR1czogZmFsc2UsCiAgICAgICAgICAgIHJlc3VsdE1lc3NhZ2U6ICdTdW51Y3V5YSB1bGHFn8SxbGFtYWTEscSfxLEgacOnaW4gacWfbGVtaW5pemkgZ2Vyw6dla2xlxZ90aXJlbWl5b3J1ei4nCiAgICAgICAgICB9OwogICAgICAgICAgcm91dGVyLnB1c2goewogICAgICAgICAgICAnbmFtZSc6ICdob21lJwogICAgICAgICAgfSk7CiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKICAgIH0pOwogIH0sCiAgZ2V0SW5mbzogZnVuY3Rpb24gZ2V0SW5mbygpIHsKICAgIHJldHVybiBheGlvcy5nZXQoIiIuY29uY2F0KHNlcnZlciwgIi9hcGkvdjMvdGlja2VyLzI0aHIiKSwgewogICAgICBoZWFkZXJzOiB7CiAgICAgICAgQXV0aG9yaXphdGlvbjogIkpXVCAiLmNvbmNhdChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYWNjZXNzVG9rZW4nKSkKICAgICAgfQogICAgfSk7CiAgfQp9Ow=="},{"version":3,"names":["axios","store","router","isAlreadyFetchingAccessToken","subscribers","server","onAccessTokenFetched","access_token","filter","callback","addSubscriber","push","init","interceptors","response","use","error","config","originalRequest","status","dispatch","then","retryOriginalRequest","Promise","resolve","headers","Authorization","data","resultStatus","resultMessage","reject","getInfo","get","localStorage","getItem"],"sources":["/Users/furkanyildirim/Desktop/vuexy-admin-v8.2.1/vue-version/vuexy-bootstrapvue/vuexy-starter-kit 2/src/auth/jwt/useJwt.js"],"sourcesContent":["import axios from '../../axios'\nimport store from '../../store/index'\nimport router from '../../router'\n\n// Token Refresh\nlet isAlreadyFetchingAccessToken = false\nlet subscribers = []\n\n const server = 'https://api2.binance.com'\n\nfunction onAccessTokenFetched (access_token) {\n  subscribers = subscribers.filter(callback => callback(access_token))\n}\n\nfunction addSubscriber (callback) {\n  subscribers.push(callback)\n}\n\nexport default {\n  init () {\n  axios.interceptors.response.use(function (response) {\n      return response\n    },\n     function (error) {\n      const { config, response } = error\n      const originalRequest = config\n      if (response) {\n        if(response.status === 401){\n          router.push({'name':'login'})\n          if (!isAlreadyFetchingAccessToken) {\n            isAlreadyFetchingAccessToken = true\n            store.dispatch('moduleAuth/fetchAccessToken')\n              .then((access_token) => {\n                isAlreadyFetchingAccessToken = false\n                onAccessTokenFetched(access_token)\n              })\n          }\n\n          const retryOriginalRequest = new Promise((resolve) => {\n            addSubscriber(access_token => {\n              originalRequest.headers.Authorization = `JWT ${access_token}`\n              resolve(axios(originalRequest))\n            })\n          })\n\n          return retryOriginalRequest\n        }\n        else if(response.status === 400){\n          response.data = {resultStatus: false, resultMessage : 'Sunucuya ulaşılamadığı için işleminizi gerçekleştiremiyoruz.'};\n          router.push({'name':'home'})\n          return Promise.reject(error)\n        }\n      }\n      return Promise.reject(error)\n    })\n  },\n  getInfo () {\n    return axios.get(`${server}/api/v3/ticker/24hr`, {headers:{Authorization:`JWT ${localStorage.getItem('accessToken')}` }})\n  },\n}\n"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,aAAlB;AACA,OAAOC,KAAP,MAAkB,mBAAlB;AACA,OAAOC,MAAP,MAAmB,cAAnB,C,CAEA;;AACA,IAAIC,4BAA4B,GAAG,KAAnC;AACA,IAAIC,WAAW,GAAG,EAAlB;AAEC,IAAMC,MAAM,GAAG,0BAAf;;AAED,SAASC,oBAAT,CAA+BC,YAA/B,EAA6C;EAC3CH,WAAW,GAAGA,WAAW,CAACI,MAAZ,CAAmB,UAAAC,QAAQ;IAAA,OAAIA,QAAQ,CAACF,YAAD,CAAZ;EAAA,CAA3B,CAAd;AACD;;AAED,SAASG,aAAT,CAAwBD,QAAxB,EAAkC;EAChCL,WAAW,CAACO,IAAZ,CAAiBF,QAAjB;AACD;;AAED,eAAe;EACbG,IADa,kBACL;IACRZ,KAAK,CAACa,YAAN,CAAmBC,QAAnB,CAA4BC,GAA5B,CAAgC,UAAUD,QAAV,EAAoB;MAChD,OAAOA,QAAP;IACD,CAFH,EAGG,UAAUE,KAAV,EAAiB;MAChB,IAAQC,MAAR,GAA6BD,KAA7B,CAAQC,MAAR;MAAA,IAAgBH,QAAhB,GAA6BE,KAA7B,CAAgBF,QAAhB;MACA,IAAMI,eAAe,GAAGD,MAAxB;;MACA,IAAIH,QAAJ,EAAc;QACZ,IAAGA,QAAQ,CAACK,MAAT,KAAoB,GAAvB,EAA2B;UACzBjB,MAAM,CAACS,IAAP,CAAY;YAAC,QAAO;UAAR,CAAZ;;UACA,IAAI,CAACR,4BAAL,EAAmC;YACjCA,4BAA4B,GAAG,IAA/B;YACAF,KAAK,CAACmB,QAAN,CAAe,6BAAf,EACGC,IADH,CACQ,UAACd,YAAD,EAAkB;cACtBJ,4BAA4B,GAAG,KAA/B;cACAG,oBAAoB,CAACC,YAAD,CAApB;YACD,CAJH;UAKD;;UAED,IAAMe,oBAAoB,GAAG,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAa;YACpDd,aAAa,CAAC,UAAAH,YAAY,EAAI;cAC5BW,eAAe,CAACO,OAAhB,CAAwBC,aAAxB,iBAA+CnB,YAA/C;cACAiB,OAAO,CAACxB,KAAK,CAACkB,eAAD,CAAN,CAAP;YACD,CAHY,CAAb;UAID,CAL4B,CAA7B;UAOA,OAAOI,oBAAP;QACD,CAnBD,MAoBK,IAAGR,QAAQ,CAACK,MAAT,KAAoB,GAAvB,EAA2B;UAC9BL,QAAQ,CAACa,IAAT,GAAgB;YAACC,YAAY,EAAE,KAAf;YAAsBC,aAAa,EAAG;UAAtC,CAAhB;UACA3B,MAAM,CAACS,IAAP,CAAY;YAAC,QAAO;UAAR,CAAZ;UACA,OAAOY,OAAO,CAACO,MAAR,CAAed,KAAf,CAAP;QACD;MACF;;MACD,OAAOO,OAAO,CAACO,MAAR,CAAed,KAAf,CAAP;IACD,CAlCH;EAmCC,CArCY;EAsCbe,OAtCa,qBAsCF;IACT,OAAO/B,KAAK,CAACgC,GAAN,WAAa3B,MAAb,0BAA0C;MAACoB,OAAO,EAAC;QAACC,aAAa,gBAAQO,YAAY,CAACC,OAAb,CAAqB,aAArB,CAAR;MAAd;IAAT,CAA1C,CAAP;EACD;AAxCY,CAAf"}]}